<!DOCTYPE HTML>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <title> PROD </title>
         <script>
            window._pcq = window._pcq || [];
_pcq.push(['subscriptionSuccessCallback',callbackFunctionOnSuccessfulSubscription]); //registers callback function to be called when user gets successfully subscribed
function callbackFunctionOnSuccessfulSubscription(subscriberId, values) {
    console.log('User got successfully subscribed.');
    console.log(subscriberId); //will output the user's subscriberId
    console.log(values.status); // SUBSCRIBED or ALREADYSUBSCRIBED
    console.log(values.message) // 'User has subscribed to push notifications.' or 'User is already subscribed to push notifications.'
    //console.log('Now you may run code which should be executed once user gets successfully subscribed.');
    _pcq.push(['addSubscriberToSegment', 'removesegment', callbackForAddToSegment]);
}
             window._pcq = window._pcq || [];
_pcq.push(['subscriptionFailureCallback',callbackFunctionOnFailedSubscription]); //registers callback function to be called when user gets successfully subscribed

function callbackFunctionOnFailedSubscription(values) {
    console.log('User could not get subscribed to push notifications');

    console.log(values.status); // BLOCKED , UNSUBSCRIBED or CANCELLED

    console.log(values.message) // 'User has blocked push notifications.', 'User has unsubscribed from push notifications', 'No change in subscription. Child window was closed.' or 'User has closed the notifications opt-in.'

    console.log('Now you may run code which should be executed once user subscription fails');
}
        </script>
<script type="text/javascript">
    (function(p,u,s,h){
        p._pcq=p._pcq||[];
        p._pcq.push(['_currentTime',Date.now()]);
        p._pcq.push(['noTrigger',true]);
        s=u.createElement('script');
        s.type='text/javascript';
        s.async=true;
        s.src='https://cdn.pushcrew.com/js/42d30a6aacadcae5555fd805711c598b.js';
        h=u.getElementsByTagName('script')[0];
        h.parentNode.insertBefore(s,h);
    })(window,document);
</script>
<script type="text/javascript">
//window._pcq = window._pcq || [];
_pcq.push(['APIReady', callback]); //will execute callback function when PushCrew API is ready

function callback() {
    //now api is ready
    console.log("inside api call");
            console.log(pushcrew.subscriberId);
    
    _pcq.push(['triggerOptOut']);

     _pcq.push(['triggerOptIn']);
        //_pcq.push(['triggerOptIn',{modal: {text: {ALREADYSUBSCRIBED: 'Saurabh, Congrats! You are already subscribed to the Push Notifications'}, blackenBackground: true}}]);
        //_pcq.push(['triggerOptIn',{modal: {text: {BLOCKED: 'Saurabh, You have blocked the notifications!'}, blackenBackground: true}}]);

                    _pcq.push(['removeSubscriberFromSegment', 'removesegment', callbackForRemoveFromSegment]);
//_pcq.push(['noTrigger',true]); //disables automatic opt-in
}
        //console.log(pushcrew.subscriberID);
    
    
        function callbackForAddToSegment(response) {
    if(response === -1) {
        console.log('User is not a subscriber or has blocked notifications');
    }
  
    else if(response === false) {
        console.log('Segment name provided is not valid. Maximum length of segment name can be 30 chars and it can only contain alphanumeric characters, underscore and dash.');
    }
  
    else {
        console.log('User got added to the segment successfully. Now you may run any code you wish to execute after user gets added to segment successfully');
    }
        
       
        
}
    
    function callbackForRemoveFromSegment(response) {
    if(response === -1) {
        console.log('User is not a subscriber or has blocked notifications');
    }
  
    if(response === false) {
        console.log('Segment name provided is not valid. Maximum length of segment name can be 30 chars and it can only contain alphanumeric characters, underscore and dash.');
    }
  
    if(response === true) {
        console.log('User got removed from the segment successfully. Now you may run any code you wish to execute after user gets removed from segment successfully');
    }
}

        </script>
    </head>
    <body>
        <h1> PROD </h1>
        </br>
 <h1> This is a test for JS Refactor code </h1>
    </body>
</html>
